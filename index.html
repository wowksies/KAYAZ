<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Profile Card</title>
    <script src="https://cdn.jsdelivr.net/npm/ogl@0.0.49/dist/ogl.umd.js"></script>

    <style>
        @font-face {
            font-family: 'SuperMario256';
            src: url('fonts/super-mario-256.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }

        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
            background: none;
            max-width: 100vw;
            overflow-x: hidden;
        }

        body {
            min-height: 100vh;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1f2937 0%, #000000 50%, #1f2937 100%);
            overflow: hidden;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .profile-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            min-height: 100vh;
            z-index: 1;
        }

        .glass-card {
            position: relative;
            z-index: 2;
            background: rgba(24, 28, 47, 0.85);
            box-shadow: 0 8px 40px 0 #7c2fff33, 0 1.5px 8px 0 #00000044;
            border-radius: 24px;
            padding: 40px 32px 32px 32px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 340px;
            min-height: 420px;
            backdrop-filter: blur(12px);
        }

        .glass-reflection {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background: linear-gradient(120deg, rgba(255,255,255,0.18) 0%, rgba(255,255,255,0.08) 60%, rgba(255,255,255,0) 100%);
            opacity: 0.7;
            z-index: 1;
            transition: opacity 0.3s;
            border-radius: 24px;
        }

        .profile-picture {
            position: relative;
            width: 128px;
            height: 128px;
            margin-bottom: 16px;
            transition: transform 0.2s cubic-bezier(.25,.8,.25,1);
            will-change: transform;
            z-index: 2;
            perspective: 600px;
            transition: box-shadow 0.2s, filter 0.2s;
        }

        .profile-picture img {
            width: 128px;
            height: 128px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid rgba(255,255,255,0.5);
            box-shadow: 0 4px 24px rgba(0,0,0,0.2);
        }

        .profile-picture.tilt {
            transition: transform 0.1s cubic-bezier(.25,.8,.25,1);
        }

        .status-card {
            background: rgba(31, 41, 55, 0.8);
            border: 1px solid #374151;
            border-radius: 16px;
            margin: 0 auto 24px;
            max-width: 320px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .status-content {
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .status-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            background: linear-gradient(135deg, #6b7280, #9ca3af);
            flex-shrink: 0;
            box-shadow: 0 0 0 2px #a855f7, 0 0 12px 2px #a855f780;
            transition: box-shadow 0.2s, filter 0.2s;
        }

        @keyframes spin {
          0% { transform: rotate(0deg);}
          100% { transform: rotate(360deg);}
        }
        .status-avatar.spin {
          animation: spin 1.2s linear infinite;
        }

        .status-info {
            flex: 1;
            text-align: left;
        }

        .status-name {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        .status-name span {
            color: white;
            font-weight: 600;
        }

        .status-text {
            color: #9ca3af;
            font-size: 14px;
        }

        .social-icons {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 24px;
            margin-top: 24px;
        }

        .social-icons a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.12);
            transition: background 0.2s, transform 0.2s, box-shadow 0.2s, filter 0.2s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .neon-bg-text {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 13vw;
            font-family: 'SuperMario256', 'Segoe UI', Arial, sans-serif;
            color: #a855f7;
            opacity: 0.13;
            pointer-events: none;
            user-select: none;
            letter-spacing: 0.15em;
            text-shadow:
                0 0 16px #a855f7,
                0 0 32px #a855f7,
                0 0 64px #a855f7,
                0 0 128px #a855f7;
            z-index: 0;
        }

        .music-btn {
            position: fixed;
            top: 32px;
            left: 32px;
            z-index: 10;
            background: rgba(31, 41, 55, 0.95);
            border: 3px solid #a855f7;
            border-radius: 50%;
            width: 64px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 32px 8px #a855f7cc, 0 0 64px 16px #a855f744;
            cursor: pointer;
            transition: box-shadow 0.2s, background 0.2s, border-color 0.2s, transform 0.2s;
            outline: none;
            overflow: visible;
        }

        .music-btn.on {
            background: rgba(168, 85, 247, 0.25);
            border-color: #a855f7;
            box-shadow: 0 0 48px 16px #a855f7ee, 0 0 96px 24px #a855f7cc;
        }

        .music-btn.off {
            background: rgba(31, 41, 55, 0.95);
            border-color: #374151;
            box-shadow: 0 0 12px 2px #37415180;
            filter: grayscale(0.7) brightness(0.7);
        }

        .music-note {
            font-size: 2.3em;
            color: #fff;
            transition: color 0.2s, filter 0.2s, text-shadow 0.2s;
            text-shadow: 0 0 16px #a855f7, 0 0 32px #a855f7;
        }

        .music-btn.off .music-note {
            color: #a855f7;
            filter: grayscale(1) brightness(0.7);
            text-shadow: none;
        }

        .music-volume-compartment {
            position: absolute;
            left: 100%;
            top: 50%;
            transform: translateY(-50%) scaleX(0.7);
            background: rgba(31,41,55,0.95);
            border-radius: 16px;
            box-shadow: 0 0 16px 2px #a855f7cc;
            padding: 12px 18px;
            margin-left: 18px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.25s, transform 0.25s;
            display: flex;
            align-items: center;
            min-width: 120px;
            z-index: 20;
        }

        #music-volume {
            width: 90px;
            accent-color: #a855f7;
            background: transparent;
            border-radius: 8px;
            outline: none;
            height: 4px;
            margin: 0 0 0 0;
            box-shadow: 0 0 8px #a855f7cc;
            transition: box-shadow 0.2s;
        }

        .enter-overlay {
            position: fixed;
            top: 0; left: 0;
            right: 0; bottom: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1000;
            background: rgba(20, 20, 30, 0.7);
            backdrop-filter: blur(12px);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.6s cubic-bezier(.4,0,.2,1), visibility 0.6s cubic-bezier(.4,0,.2,1);
        }

        .enter-overlay.hide {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .enter-glass-btn {
            background: rgba(255,255,255,0.13);
            border-radius: 24px;
            box-shadow: 0 0 32px 8px #fff8, 0 0 64px 16px #a855f7cc;
            border: 1.5px solid #fff6;
            padding: 36px 64px;
            font-size: 2.5rem;
            color: #fff;
            font-family: 'SuperMario256', 'Segoe UI', Arial, sans-serif;
            text-shadow: 0 0 24px #fff, 0 0 48px #a855f7;
            cursor: pointer;
            user-select: none;
            transition: box-shadow 0.2s, background 0.2s, transform 0.2s;
            outline: none;
            display: flex;
            align-items: center;
            justify-content: center;
            letter-spacing: 0.08em;
        }

        .side-arrow {
            position: absolute;
            right: -50px;
            top: 50%;
            transform: translateY(-50%);
            background: #7c2fff;
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5em;
        }

        .side-panel {
            position: absolute;
            right: -260px;
            top: 50%;
            transform: translateY(-50%);
            width: 200px;
            background: #181c2f;
            color: #fff;
            border-radius: 12px;
            box-shadow: 0 0 12px 2px #7c2fff33;
            padding: 16px;
            opacity: 0;
            pointer-events: none;
        }

        .side-panel.active {
            opacity: 1;
            pointer-events: auto;
        }

        .info-tooltip-btn {
            display: block;
            margin: 32px auto 0 auto;
            background: rgba(24, 28, 47, 0.85);
            color: #fff;
            border: 2px solid #a855f7;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.5em;
            font-family: inherit;
            cursor: pointer;
            box-shadow: 0 2px 12px #a855f7cc;
            transition: background 0.2s, box-shadow 0.2s, border-color 0.2s;
            position: relative;
            z-index: 10;
        }

        .info-tooltip-text {
            display: block;
            position: absolute;
            left: 50%;
            transform: translateX(-50%) translateY(-120%) scale(0.98);
            background: rgba(24, 28, 47, 0.95);
            color: #fff;
            padding: 12px 20px;
            border-radius: 16px;
            box-shadow: 0 2px 16px #a855f7cc;
            font-size: 1rem;
            white-space: nowrap;
            pointer-events: none;
            z-index: 20;
            opacity: 0;
            transition: opacity 0.32s cubic-bezier(.4,0,.2,1), transform 0.32s cubic-bezier(.4,0,.2,1), visibility 0.32s cubic-bezier(.4,0,.2,1);
            visibility: hidden;
        }

        .info-tooltip-btn:hover + .info-tooltip-text,
        .info-tooltip-btn:focus + .info-tooltip-text {
            opacity: 1;
            transform: translateX(-50%) translateY(-170%) scale(1.04);
            visibility: visible;
        }

        .shiny-text {
            position: relative;
            color: #b5b5b5;
            font-family: 'SuperMario256', 'Segoe UI', Arial, sans-serif;
            font-size: 2.2rem;
            font-weight: 900;
            letter-spacing: 0.04em;
            text-align: center;
            display: inline-block;
        }

        .shiny-text::after {
            content: attr(data-text);
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            color: transparent;
            background: linear-gradient(
                120deg,
                rgba(255, 255, 255, 0) 30%,
                #fff 48%,
                #fff 52%,
                rgba(255, 255, 255, 0) 70%
            );
            background-size: 200% 100%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-fill-color: transparent;
            animation: shine 1.5s linear infinite;
            pointer-events: none;
        }

        @keyframes shine {
            0% {
                background-position: 100%;
            }
            100% {
                background-position: -100%;
            }
        }

        .star-border-container {
            display: inline-block;
            position: relative;
            border-radius: 20px;
            overflow: hidden;
        }

        .border-gradient-bottom {
            position: absolute;
            width: 300%;
            height: 50%;
            opacity: 0.7;
            bottom: -12px;
            right: -250%;
            border-radius: 50%;
            background: radial-gradient(circle, white, transparent 10%);
            animation: star-movement-bottom 6s linear infinite alternate;
            z-index: 0;
        }

        .border-gradient-top {
            position: absolute;
            opacity: 0.7;
            width: 300%;
            height: 50%;
            top: -12px;
            left: -250%;
            border-radius: 50%;
            background: radial-gradient(circle, white, transparent 10%);
            animation: star-movement-top 6s linear infinite alternate;
            z-index: 0;
        }

        .inner-content {
            position: relative;
            border: 1px solid #222;
            background: #000;
            color: white;
            font-size: 16px;
            text-align: center;
            padding: 16px 26px;
            border-radius: 20px;
            z-index: 1;
        }

        @keyframes star-movement-bottom {
            0% {
                transform: translate(0%, 0%);
                opacity: 1;
            }
            100% {
                transform: translate(-100%, 0%);
                opacity: 0;
            }
        }

        @keyframes star-movement-top {
            0% {
                transform: translate(0%, 0%);
                opacity: 1;
            }
            100% {
                transform: translate(100%, 0%);
                opacity: 0;
            }
        }

        #particles-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
            pointer-events: none;
        }
        #particles-bg canvas {
            width: 100vw !important;
            height: 100vh !important;
            display: block;
            position: absolute;
            top: 0; left: 0;
            z-index: -1;
            pointer-events: none;
        }

        /* Ripple effect for tap/cursor animation */
        .ripple {
            position: fixed;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(180, 100, 255, 0.3);
            pointer-events: none;
            transform: scale(0);
            animation: ripple-anim 0.6s linear;
            z-index: 9999;
        }

        @keyframes ripple-anim {
            to {
                transform: scale(2.5);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div id="particles-bg" style="position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;pointer-events:none;"></div>
    <div class="profile-container">
        <div class="glass-card">
            <div class="glass-reflection"></div>
            <div class="profile-picture" id="pfp-3d">
                <img id="discord-pfp" src="" alt="Discord Profile Picture" width="128" height="128" />
            </div>
            <div class="username-section">
                <div class="shiny-text" data-text="KAYAZ">KAYAZ</div>
            </div>
            <div class="status-card">
                <div class="status-content">
                    <img id="status-icon" class="status-avatar" src="" alt="Status Icon" width="40" height="40" />
                    <div class="status-info">
                        <div class="status-name"><span id="status-username">ikwv</span></div>
                        <div class="status-text" id="status-text">currently doing nothing</div>
                    </div>
                </div>
            </div>
            <div class="social-icons">
                <a href="https://discord.com/users/747411610389446747" target="_blank" title="Discord">
                    <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/discord.svg" alt="Discord" width="32" height="32" style="filter: invert(1);">
                </a>
                <a href="https://www.roblox.com/users/1728947656/profile" target="_blank" title="Roblox">
                    <svg width="32" height="32" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="7" y="7" width="36" height="36" rx="6" fill="#fff"/>
                        <rect x="13" y="13" width="24" height="24" rx="3" fill="#232323"/>
                        <rect x="20" y="20" width="10" height="10" rx="2" fill="#fff"/>
                    </svg>
                </a>
                <a href="https://www.tiktok.com/@k.a.yaz" target="_blank" title="TikTok">
                    <svg width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="24" cy="24" r="24" fill="#fff"/>
                        <path d="M32.5 19.5c-1.7 0-3.1-1.4-3.1-3.1V14h-3.2v13.2c0 2.1-1.7 3.8-3.8 3.8s-3.8-1.7-3.8-3.8 1.7-3.8 3.8-3.8c.2 0 .4 0 .6.1v-3.3c-.2 0-.4-.1-.6-.1-3.9 0-7.1 3.2-7.1 7.1s3.2 7.1 7.1 7.1 7.1-3.2 7.1-7.1V23c.9.6 2 1 3.1 1v-4.5z" fill="#000"/>
                    </svg>
                </a>
                <a href="https://stats.cc/siege/KAYAZ.CTRL/29032a28-cbf4-444a-ad19-3413761f3710" target="_blank" title="Rainbow Six Siege">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <circle cx="16" cy="16" r="16" fill="#fff"/>
                        <g>
                            <path d="M24 8c0-2.21-1.79-4-4-4h-8c-2.21 0-4 1.79-4 4v16c0 2.21 1.79 4 4 4h8c2.21 0 4-1.79 4-4v-8h-8v2h6v6c0 1.1-.9 2-2 2h-8c-1.1 0-2-.9-2-2V8c0-1.1.9-2 2-2h8c1.1 0 2 .9 2 2v4h2V8z" fill="#232323"/>
                            <rect x="13.5" y="15" width="5" height="6" rx="1" fill="#000"/>
                            <rect x="15" y="17" width="3" height="1.2" fill="#fff"/>
                            <rect x="15.8" y="15.5" width="1.4" height="2.5" fill="#fff"/>
                        </g>
                    </svg>
                </a>
            </div>
            <button class="info-tooltip-btn" aria-label="Show info">?</button>
            <div class="info-tooltip-text">I play R6 and Developed this website on my own.</div>
        </div>
        <button id="side-arrow" class="side-arrow" aria-label="Show info">&#8594;</button>
        <div id="side-panel" class="side-panel">I play R6 and developed this website on my own.</div>
        <div class="neon-bg-text">KAYAZ</div>
        <button id="music-toggle" class="music-btn" aria-label="Toggle music">
            <span id="music-icon" class="music-note">&#127925;</span>
            <div class="music-volume-compartment">
                <input type="range" id="music-volume" min="0" max="1" step="0.01" value="0.5" aria-label="Music volume" />
            </div>
        </button>
        <audio id="bg-music" src="music.mp3" loop></audio>
        <div id="enter-overlay" class="enter-overlay">
            <div class="enter-glass-btn" id="enter-btn">Click To Enter</div>
        </div>
    </div>
    <div class="star-border-container" style="margin: 32px auto; max-width: 300px;">
        <div class="border-gradient-bottom"></div>
        <div class="border-gradient-top"></div>
        <div class="inner-content">Star Border Example</div>
    </div>
    
    <script>
        // --- Main DOM Manipulation Script (runs after all HTML elements are loaded) ---
        document.addEventListener('DOMContentLoaded', function() {
            const userId = "747411610389446747";
            const apiUrl = \`https://lanyard.rest/v1/users/${userId}\`;

            // Elements
            const musicBtn = document.getElementById('music-toggle');
            const musicIcon = document.getElementById('music-icon');
            const bgMusic = document.getElementById('bg-music');
            const musicVolume = document.getElementById('music-volume');
            const musicCompartment = document.querySelector('.music-volume-compartment');
            let musicOn = true;
            let hideCompartmentTimeout = null;
            const enterOverlay = document.getElementById('enter-overlay');
            const enterBtn = document.getElementById('enter-btn');
            
            // --- ENTER OVERLAY LOGIC (The primary function that makes the site "work") ---
            if (enterOverlay && enterBtn) {
                // Pause music until user enters (Important: music.mp3 must be in the same directory)
                if (bgMusic) bgMusic.pause();

                // Hide overlay and start music on click
                enterBtn.addEventListener('click', function() {
                    enterOverlay.classList.add('hide');
                    // Delay setting display: none until after the transition finishes
                    setTimeout(() => {
                        enterOverlay.style.display = 'none';
                    }, 700);
                    
                    // Attempt to play music, which is now allowed after a user interaction
                    if (bgMusic && musicOn) {
                         // Use .play().catch to prevent uncaught promise rejection errors if playback fails
                        bgMusic.play().catch(e => console.log("Music auto-play failed, but overlay is gone.", e));
                    }
                });
            }
            
            // --- MUSIC CONTROL LOGIC ---
            function updateMusicBtn() {
                if (musicOn) {
                    musicBtn.classList.add('on');
                    musicBtn.classList.remove('off');
                    musicIcon.textContent = '\uD83C\uDFB5'; // ðŸŽµ
                } else {
                    musicBtn.classList.remove('on');
                    musicBtn.classList.add('off');
                    musicIcon.textContent = '\uD83C\uDFB5'; // ðŸŽµ
                }
            }

            if (musicBtn && bgMusic) {
                updateMusicBtn();
                // Set initial volume
                bgMusic.volume = musicVolume ? parseFloat(musicVolume.value) : 0.5; 
                
                if (musicVolume) {
                    musicVolume.value = bgMusic.volume;
                    musicVolume.addEventListener('input', function(e) {
                        bgMusic.volume = parseFloat(this.value);
                        e.stopPropagation();
                    });
                    // Prevent mousedown/touchstart on slider from triggering button animation
                    musicVolume.addEventListener('mousedown', function(e) { e.stopPropagation(); });
                    musicVolume.addEventListener('touchstart', function(e) { e.stopPropagation(); });
                }
                
                musicBtn.addEventListener('click', function(e) {
                    // Don't toggle music or animate if clicking the slider
                    if (e.target === musicVolume) return;
                    
                    musicOn = !musicOn;
                    if (musicOn) {
                        bgMusic.play().catch(e => console.log("Music play failed.", e));
                    } else {
                        bgMusic.pause();
                    }
                    
                    musicBtn.classList.add('toggling');
                    setTimeout(() => musicBtn.classList.remove('toggling'), 250);
                    updateMusicBtn();
                });
            }

            // Volume compartment hover logic
            function showCompartment() {
                if (musicCompartment) {
                    musicCompartment.style.opacity = '1';
                    musicCompartment.style.pointerEvents = 'auto';
                    musicCompartment.style.transform = 'translateY(-50%) scaleX(1)';
                }
                if (hideCompartmentTimeout) {
                    clearTimeout(hideCompartmentTimeout);
                    hideCompartmentTimeout = null;
                }
            }
            function hideCompartment() {
                if (hideCompartmentTimeout) clearTimeout(hideCompartmentTimeout);
                hideCompartmentTimeout = setTimeout(() => {
                    if (musicCompartment) {
                        musicCompartment.style.opacity = '';
                        musicCompartment.style.pointerEvents = '';
                        musicCompartment.style.transform = '';
                    }
                }, 1000);
            }
            if (musicBtn && musicCompartment) {
                musicBtn.addEventListener('mouseenter', showCompartment);
                musicBtn.addEventListener('mouseleave', hideCompartment);
                musicCompartment.addEventListener('mouseenter', showCompartment);
                musicCompartment.addEventListener('mouseleave', hideCompartment);
            }
            
            // Prevent skew on slider drag
            if (musicBtn && musicVolume) {
                musicVolume.addEventListener('mousedown', function() {
                    musicBtn.classList.add('noactive');
                });
                musicVolume.addEventListener('touchstart', function() {
                    musicBtn.classList.add('noactive');
                });
                document.addEventListener('mouseup', function() {
                    musicBtn.classList.remove('noactive');
                });
                document.addEventListener('touchend', function() {
                    musicBtn.classList.remove('noactive');
                });
            }

            // --- LANYARD API FETCH (Discord Status) ---
            fetch(apiUrl)
                .then(res => res.json())
                .then(({ data }) => {
                    // Profile Picture
                    const avatarUrl = \`https://cdn.discordapp.com/avatars/${data.discord_user.id}/${data.discord_user.avatar}.png\`;
                    const discordPfp = document.getElementById('discord-pfp');
                    if (discordPfp) discordPfp.src = avatarUrl;

                    // Username
                    const statusUsernameElem = document.getElementById('status-username');
                    if (statusUsernameElem) statusUsernameElem.textContent = data.discord_user.username;

                    // Status Icon and Text
                    const statusIcon = document.getElementById('status-icon');
                    const statusTextElem = document.getElementById('status-text');
                    let activityText = "currently doing nothing";
                    let iconUrl = "bored.png"; // Fallback image
                    let spinning = false;

                    if (data.activities && data.activities.length > 0) {
                        const spotify = data.activities.find(act => act.type === 2);
                        if (spotify) {
                            activityText = \`Listening to ${spotify.details} by ${spotify.state}\`;
                            iconUrl = spotify.assets && spotify.assets.large_image
                                ? \`https://i.scdn.co/image/${spotify.assets.large_image.replace("spotify:", "")}\`
                                : avatarUrl;
                            spinning = true;
                        } else {
                            const game = data.activities.find(act => act.type === 0 || act.type === 4);
                            if (game) {
                                activityText = \`Playing ${game.name}\`;
                                if (game.assets && game.assets.large_image) {
                                    iconUrl = \`https://cdn.discordapp.com/app-assets/${game.application_id}/${game.assets.large_image}.png\`;
                                } else {
                                    iconUrl = avatarUrl;
                                }
                                spinning = true;
                            }
                        }
                    }

                    if (statusIcon) {
                        statusIcon.src = iconUrl;
                        statusIcon.classList.toggle('spin', spinning);
                    }
                    if (statusTextElem) statusTextElem.textContent = activityText;
                })
                .catch((err) => {
                    const statusTextElem = document.getElementById('status-text');
                    if (statusTextElem) statusTextElem.textContent = "Could not fetch Discord data.";
                });

            // --- 3D Hover Effect ---
            const pfp3d = document.getElementById('pfp-3d');
            if (pfp3d) {
                pfp3d.addEventListener('mousemove', (e) => {
                    const rect = pfp3d.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const rotateX = ((y - centerY) / centerY) * 10;
                    const rotateY = ((x - centerX) / centerX) * 10;
                    pfp3d.style.transform = \`rotateX(${-rotateX}deg) rotateY(${rotateY}deg)\`;
                    pfp3d.classList.add('tilt');
                });
                pfp3d.addEventListener('mouseleave', () => {
                    pfp3d.style.transform = '';
                    pfp3d.classList.remove('tilt');
                });
            }

            // --- Side panel toggle logic ---
            const sideArrow = document.getElementById('side-arrow');
            const sidePanel = document.getElementById('side-panel');
            if (sideArrow && sidePanel) {
                sideArrow.addEventListener('click', () => {
                    sidePanel.classList.toggle('active');
                });
            }
        });

        // --- Interactive Particle Background using OGL (Runs immediately) ---
        (function() {
            if (!window.OGL) return; 

            const defaultColors = ["#ffffff", "#ffffff", "#ffffff"];
            const hexToRgb = (hex) => {
                hex = hex.replace(/^#/, "");
                if (hex.length === 3) hex = hex.split("").map((c) => c + c).join("");
                const int = parseInt(hex, 16);
                const r = ((int >> 16) & 255) / 255;
                const g = ((int >> 8) & 255) / 255;
                const b = (int & 255) / 255;
                return [r, g, b];
            };

            const vertex = \`
                attribute vec3 position;
                attribute vec4 random;
                attribute vec3 color;
                uniform mat4 modelMatrix;
                uniform mat4 viewMatrix;
                uniform mat4 projectionMatrix;
                uniform float uTime;
                uniform float uSpread;
                uniform float uBaseSize;
                uniform float uSizeRandomness;
                varying vec4 vRandom;
                varying vec3 vColor;
                void main() {
                    vRandom = random;
                    vColor = color;
                    vec3 pos = position * uSpread;
                    pos.z *= 10.0;
                    vec4 mPos = modelMatrix * vec4(pos, 1.0);
                    float t = uTime;
                    mPos.x += sin(t * random.z + 6.28 * random.w) * mix(0.1, 1.5, random.x);
                    mPos.y += sin(t * random.y + 6.28 * random.x) * mix(0.1, 1.5, random.w);
                    mPos.z += sin(t * random.w + 6.28 * random.y) * mix(0.1, 1.5, random.z);
                    vec4 mvPos = viewMatrix * mPos;
                    gl_PointSize = (uBaseSize * (1.0 + uSizeRandomness * (random.x - 0.5))) / length(mvPos.xyz);
                    gl_Position = projectionMatrix * mvPos;
                }
            \`;

            const fragment = \`
                precision highp float;
                uniform float uTime;
                uniform float uAlphaParticles;
                varying vec4 vRandom;
                varying vec3 vColor;
                void main() {
                    vec2 uv = gl_PointCoord.xy;
                    float d = length(uv - vec2(0.5));
                    if(uAlphaParticles < 0.5) {
                        if(d > 0.5) {
                            discard;
                        }
                        gl_FragColor = vec4(vColor + 0.2 * sin(uv.yxx + uTime + vRandom.y * 6.28), 1.0);
                    } else {
                        float circle = smoothstep(0.5, 0.4, d) * 0.8;
                        gl_FragColor = vec4(vColor + 0.2 * sin(uv.yxx + uTime + vRandom.y * 6.28), circle);
                    }
                }
            \`;

            const container = document.getElementById('particles-bg');
            if (!container) return;

            const renderer = new OGL.Renderer({ dpr: 1, alpha: true });
            const gl = renderer.gl;
            container.appendChild(gl.canvas);
            gl.clearColor(0, 0, 0, 0);

            const camera = new OGL.Camera(gl, { fov: 15 });
            camera.position.set(0, 0, 20);

            function resize() {
                const width = container.clientWidth;
                const height = container.clientHeight;
                renderer.setSize(width, height);
                camera.perspective({ aspect: gl.canvas.width / gl.canvas.height });
            }
            window.addEventListener("resize", resize, false);
            resize();

            // Particle settings
            const particleCount = 200;
            const particleSpread = 10;
            const speed = 0.1;
            const particleColors = defaultColors;
            const alphaParticles = false;
            const particleBaseSize = 100;
            const sizeRandomness = 1;
            const disableRotation = false;

            const count = particleCount;
            const positions = new Float32Array(count * 3);
            const randoms = new Float32Array(count * 4);
            const colors = new Float32Array(count * 3);
            const palette = particleColors && particleColors.length > 0 ? particleColors : defaultColors;

            for (let i = 0; i < count; i++) {
                let x, y, z, len;
                do {
                    x = Math.random() * 2 - 1;
                    y = Math.random() * 2 - 1;
                    z = Math.random() * 2 - 1;
                    len = x * x + y * y + z * z;
                } while (len > 1 || len === 0);
                const r = Math.cbrt(Math.random());
                positions.set([x * r, y * r, z * r], i * 3);
                randoms.set([Math.random(), Math.random(), Math.random(), Math.random()], i * 4);
                const col = hexToRgb(palette[Math.floor(Math.random() * palette.length)]);
                colors.set(col, i * 3);
            }

            const geometry = new OGL.Geometry(gl, {
                position: { size: 3, data: positions },
                random: { size: 4, data: randoms },
                color: { size: 3, data: colors },
            });

            const program = new OGL.Program(gl, {
                vertex,
                fragment,
                uniforms: {
                    uTime: { value: 0 },
                    uSpread: { value: particleSpread },
                    uBaseSize: { value: particleBaseSize },
                    uSizeRandomness: { value: sizeRandomness },
                    uAlphaParticles: { value: alphaParticles ? 1 : 0 },
                },
                transparent: true,
                depthTest: false,
            });

            const particles = new OGL.Mesh(gl, { mode: gl.POINTS, geometry, program });

            let animationFrameId;
            let lastTime = performance.now();
            let elapsed = 0;

            function update(t) {
                animationFrameId = requestAnimationFrame(update);
                const delta = t - lastTime;
                lastTime = t;
                elapsed += delta * speed;

                program.uniforms.uTime.value = elapsed * 0.001;

                if (!disableRotation) {
                    particles.rotation.x = Math.sin(elapsed * 0.0002) * 0.1;
                    particles.rotation.y = Math.cos(elapsed * 0.0005) * 0.15;
                    particles.rotation.z += 0.01 * speed;
                }

                renderer.render({ scene: particles, camera });
            }
            animationFrameId = requestAnimationFrame(update);

            window.addEventListener('beforeunload', () => {
                cancelAnimationFrame(animationFrameId);
                if (container.contains(gl.canvas)) {
                    container.removeChild(gl.canvas);
                }
            });
        })();

        // --- Ripple effect for tap/click (Runs immediately to attach global listeners) ---
        function createRipple(x, y) {
            const ripple = document.createElement('div');
            ripple.className = 'ripple';
            ripple.style.left = \`${x - 25}px\`;
            ripple.style.top = \`${y - 25}px\`;
            document.body.appendChild(ripple);
            setTimeout(() => ripple.remove(), 600);
        }

        // Touch support
        window.addEventListener('touchstart', function(e) {
            if (e.touches && e.touches.length > 0) {
                const touch = e.touches[0];
                createRipple(touch.clientX, touch.clientY);
            }
        });
        // Mouse support
        window.addEventListener('mousedown', function(e) {
            // Only left click
            if (e.button === 0) {
                createRipple(e.clientX, e.clientY);
            }
        });
    </script>
</body>
</html>
